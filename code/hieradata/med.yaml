---
## ~~~~~~ ##
## TOMCAT ##
## ~~~~~~ ##
posc_system: "mediation"
tomcat_webapps:
  mediation:
    params:
      package_version: 'latest'
  mobile:
    params:
      package_version: 'latest'
  api:
    params:
      package_version: 'latest'
tomcat_catalina_opts: "-Dext.prop.dir=%{hiera('posc_properties_dir')}
 -Xms1024m
 -Xmx3072m
 -Dlogback.ContextSelector=JNDI
 -Dhttps.protocols=TLSv1.2,TLSv1.1,TLSv1,SSLv2Hello
 -Djavax.net.ssl.keyStore=%{hiera('posc_properties_dir')}/posc_keystore.jks
 -Djavax.net.ssl.keyStorePassword=%{hiera('tomcat_keystore_password')}
 -XX:+PrintGCDetails -XX:+PrintGCDateStamps -XX:+PrintGCApplicationStoppedTime -Xloggc:%{hiera('tomcat_log_folder')}/gc.log"

## ~~~~~~~~ ##
## PARTNERS ##
## ~~~~~~~~ ##
med_fitbit_client_key: "227GY6"
med_netatmo_client_key: "563b10cee6da23fe8d75214d"
med_ista_oauth_authorization_url: "http://demo.ista-webconso.fr/espace-client-ws/oauth/authorize"
med_ista_oauth_consumer_key: "docapost_partenaire_dev"
med_ista_oauth_token_url: "https://demo.ista-webconso.fr/espace-client-ws/oauth/token"
med_ista_oauth_username: "docapost_partenaire_dev"
med_ista_service: "http://demo.ista-webconso.fr/espace-client-ws"
med_ista_connect_timeout: 10,
med_ista_socket_timeout: 20,
med_withings_client_key: "19efd2f7506033d5edf148667542b36f2872c4c2387b0963cb68514fbb03"
med_myfoxhomecontrol_client_key: "c3b8d395cc57d28bb1d97762c82a535a"
med_myfoxhomealarm_client_key: "55990c37-104c-11e6-8efd-1224a98a59cb_3s1322fodyg480cgkk8cokw84gk0wcsogs8o0804s0c8kk880w"
med_tactio_client_key: "75dfab8b42274f6eb7f0684227d1acba"
med_tactio_username: "daemonUser"
med_tactio_base_url: "https://vivoptim-rct.docapost-bpo.com/tactio"
# Smockeo
smockeo_service_url: "http://dev-api.smockeo.com/connector"
legrand_connector_cron_pull_enable_check: true
legrand_connector_oauth_authorization_url: "https://eliot-auth-proxy-webapp.azurewebsites.net/authorize"
legrand_connector_oauth_consumer_key: "8f6bcc31-9a04-43f3-a29a-8aefe9fd3813"
legrand_connector_subscription_key: "2ded017fcd024d9f83df74ecfea7a714"
legrand_connector_connect_timeout: 10,
legrand_connector_read_timeout: 20,
legrand_connector_oauth_callback: "https://%{hiera('external_url')}/mediation/partner/legrand/callback"
legrand_connector_oauth_token_url: "https://eliot-auth-proxy-webapp.azurewebsites.net/token"

## ~~~ ##
## TYK ##
## ~~~ ##
tyk_redis_instance1_host:
  red1.dev.hub.docapost.io: 6379
  red2.dev.hub.docapost.io: 6379
  red3.dev.hub.docapost.io: 6379
tyk_redis_master_host: med1

tyk_apps_basic:
  restapi_docs:
    listen_path: "/rest-api/docs/"
    target_url: "http://stubs.dev.hub.docapost.io:3011/api/"
    api_id: api_docs
  api_docs:
    listen_path: "/api/docs/"
    target_url: "http://stubs.dev.hub.docapost.io:3011/api/"
    api_id: api_docs
  external_api_docs:
    listen_path: "/external-api/docs/"
    target_url: "http://stubs.dev.hub.docapost.io:3011/external-api/"
    api_id: external_api_docs
  external_api_docs_mock:
    listen_path: "/external-api/docs/mocks/"
    target_url: "http://stubs.dev.hub.docapost.io:3010/"
    api_id: external_api_docs
tyk_apps_hmac:
  external_api_mock:
    listen_path: "/external-api/mocks/"
    target_url: "http://stubs.dev.hub.docapost.io:3010/"
    api_id: external_api_mocks
  provisioning_vsmp_contract:
    listen_path: "/mediation/v1/hmac/vsmp/"
    target_url: "%{hiera('posc_contract_api_url')}/v1/"
    api_id: vsmp
    with_middleware: true
    whitelist:
      crud_contracts:
        path: "/mediation/v1/hmac/vsmp/contracts"
        method_actions:
          GET:
            action: "no_action"
          POST:
            action: "no_action"
          PUT:
            action: "no_action"
      crud_contract_number:
        path: "/mediation/v1/hmac/vsmp/contracts/{contractNumber}"
        method_actions:
          GET:
            action: "no_action"
          POST:
            action: "no_action"
          PUT:
            action: "no_action"
      crud_contract_number_version:
        path: "/mediation/v1/hmac/vsmp/contracts/{contractNumber}/{contractVersion}"
        method_actions:
          GET:
            action: "no_action"
          POST:
            action: "no_action"
          PUT:
            action: "no_action"
      crud_contract_number_version_sepa:
        path: "/mediation/v1/hmac/vsmp/contracts/{contractNumber}/{contractVersion}/SEPA"
        method_actions:
          GET:
            action: "no_action"
          POST:
            action: "no_action"
          PUT:
            action: "no_action"
      crud_contract_number_sepa:
        path: "/mediation/v1/hmac/vsmp/contracts/{contractNumber}/SEPA"
        method_actions:
          GET:
            action: "no_action"
          POST:
            action: "no_action"
          PUT:
            action: "no_action"
      crud_contract_sepa_mandate:
        path: "/mediation/v1/hmac/vsmp/{contractNumber}/{contractVersion}/SEPA/{mandateRum}"
        method_actions:
          GET:
            action: "no_action"
          POST:
            action: "no_action"
          PUT:
            action: "no_action"
      crud_contract_number_crs:
        path: "/mediation/v1/hmac/vsmp/{contractNumber}/crs"
        method_actions:
          GET:
            action: "no_action"
          POST:
            action: "no_action"
          PUT:
            action: "no_action"
      crud_contract_number_status:
        path: "/mediation/v1/hmac/vsmp/{contractNumber}/status"
        method_actions:
          GET:
            action: "no_action"
          POST:
            action: "no_action"
          PUT:
            action: "no_action"

## ~~~~~  ##
## DOMINO ##
## ~~~~~  ##
domino_notification_embedded_url: "https://%{hiera('external_url')}/dashboard-front/domino/send-package"

philips_oauth_consumer_key: GU2CROut0BPbcPnQbTKGA57wF8WwI1n1
philips_oauth_device_id: hub-numerique-la-poste-dev
philips_oauth_app_id: hub-numerique-la-poste-dev
philips_oauth_device_name: hub-numerique-la-poste-dev
philips_oauth_callback_url: "https://%{hiera('external_url')}/mediation/partner/hue/callback/"
philips_cron_pull_enable_check: true

lifx_connector_oauth_consumer_key: a0b7e53d6abea42954e146cd1f6e3cc9c7c3435ed358407035217848653c6d36
lifx_connector_oauth_callback_url: ''
lifx_connector_cron_pull_enable_check: true

ihealth_connector_client_key: bb2e384ccf19408e988efe879811d453
ihealth_connector_oauth_callback_url: "https://%{hiera('external_url')}/mediation/partner/ihealth/callback"

myfox_alarm_connector_oauth_callback_url: "https://%{hiera('external_url')}/mediation/partner/myfoxhomealarm/callback/"
myfox_cron_pull_enable_check: true

withings_connector_oauth_callback_url: "https://%{hiera('external_url')}/mediation/partner/withings/callback"

netatmo_connector_oauth_callback_url: "https://%{hiera('external_url')}/mediation/partner/netatmo/callback"
netatmo_connector_cron_pull_enable_check: true

ista_connector_oauth_callback_url: "https://%{hiera('external_url')}/mediation/partner/ista/callback"

ta_url: "%{hiera('stubs_url')}"
ta_hmac_key_id: d284caf54e8e18dc0105e1f9b4616c14

posc_external_ta_proxy_host: "%{hiera('rp_domain')}"
posc_external_ta_proxy_port: "%{hiera('rp_port_ext')}"

sudo::configs:
  'newtprod':
    'content': "newtprod ALL=(ALL) NOPASSWD: /opt/puppetlabs/bin/puppet, /usr/bin/systemctl stop tomcat.service, /usr/bin/systemctl start vertx_kernel.service, /usr/bin/systemctl stop vertx_kernel.service"
    'ensure': 'present'

#NEST
nest_oauth_client_id: 'c0b8f459-b068-4c53-b0fb-a4c5cf37cc3c'
nest_activate_webSocket_debug_mode: 'true'
affect_partner_accounts_min_nodes: 2

ihealth_client_auth_certificate_file: "ihealth_client_auth_dev.crt"
ihealth_client_auth_key_file: "ihealth_client_auth_dev.key"

#REDIS
redis_save: [[300, 1], [60, 10000]]

tyk_redis_cluster_enable: true
redis_service_running: false
redis_service_enable: false
sentinel_service_running: false
sentinel_service_enable: false

# Cron
mediation_enable_jobs_executor_async: true
